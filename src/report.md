# Cети в Linux.
### Настройка сетей в Linux на виртуальных машинах.
## Part 1. Инструмент ipcalc
### 1.1. Сети и маски
 Определи и запиши в отчёт:
 - Адрес сети 192.167.38.54/13
 - Перевод маски 255.255.255.0 в префиксную и двоичную запись, /15 в обычную и двоичную, 11111111.11111111.11111111.11110000 в обычную и префиксную
 - Минимальный и максимальный хост в сети 12.167.38.4 при масках: /8, 11111111.11111111.00000000.00000000, 255.255.254.0 и /4
### 1.2. localhost
 - Определи и запиши в отчёт, можно ли обратиться к приложению, работающему на localhost, со следующими IP: 194.34.23.100, 127.0.0.2, 127.1.0.1, 128.0.0.1
### 1.3. Диапазоны и сегменты сетей
 Определи и запиши в отчёт:
 - Какие из перечисленных IP можно использовать в качестве публичного, а какие только в качестве частных: 10.0.0.45, 134.43.0.2, 192.168.4.2, 172.20.250.4, 172.0.2.1, 192.172.0.1, 172.68.0.2, 172.16.255.255, 10.10.10.10, 192.169.168.1
 - Какие из перечисленных IP адресов шлюза возможны у сети 10.10.0.0/18: 10.0.0.1, 10.10.0.2, 10.10.10.10, 10.10.100.1, 10.10.1.255
## Выполнение Part 1
### Адрес сети 192.167.38.54/13 утилитой ipcalc:
![alt text](<pictures/Picture 1.jpg>)
### Перевод маски 255.255.255.0 в утилите ipcalc:
![alt text](<pictures/Picture 2.jpg>)
### Перевод маски /15 в утилите ipcalc:
![alt text](<pictures/Picture 3.jpg>)
### Перевод маски 11111111.11111111.11111111.11110000
 Десятичная: 255. 255. 255. 240 
 
 Префиксная: /28

### Min/Max хост в сети 12.167.38.4 при разных масках:
![alt text](<pictures/Picture 4.jpg>)
![alt text](<pictures/Picture 5.jpg>)
### Подключение к localhost (127.0.0.1/8)
  Loopback - адреса 127.0.0.0/8. Туда входят диапазон адресов 127.0.0.0 - 127.255.255.255.

Адреса 127.0.0.2, 127.1.0.1 являются частью loopback, поэтому если приложение
запущено на localhost == 127.0.0.1, то мы сможем подключиться к этим адресам тк они
являются частью loopback.
На адреса 194.34.23.100, 128.0.0.1 мы не сможем подкючиться тк они вне контура
loopback
### Публичные и частные ip-адреса
Публичный адрес используется для выхода в интернет, а частный — для обмена данными в локальных сетях.

Все публичные адреса распределены между региональными интернет-регистраторами. Их всего пять: 

RIPE — для Европы и Ближнего Востока, 

ARIN — для Северной Америки, 

APNIC — для Азии и стран Тихого океана, 

LANIC — для Латинской Америки, 

AfriNIC — для Африки.

![alt text](<pictures/Picture 7.jpg>)

- 10.0.0.45 - private

- 134.43.0.2 - public

- 192.168.4.2 - private

- 172.20.250.4 - private

- 172.0.2.1 - public

- 192.172.0.1 - public

- 172.68.0.2 - public

- 172.16.255.255 - private

- 10.10.10.10 - private

- 192.169.168.1 - public

### Шлюза у сети 10.10.0.0/18
Маска /18 = 11111111.11111111.11000000.00000000

![alt text](<pictures/Picture 6.jpg>)

10.0.0.1 - в радиусе сети 

10.10.0.2 - в радиусе сети

10.10.10.10 - в радиусе сети

10.10.100.1 - не в радиусе сети

10.10.1.255 - в радиусе сети

## Part 2. Статическая маршрутизация между двумя машинами

 Подними две виртуальные машины (далее -- ws1 и ws2).

 С помощью команды ip a посмотри существующие сетевые интерфейсы.

  В отчёт помести скрин с вызовом и выводом использованной команды.

 Опиши сетевой интерфейс, соответствующий внутренней сети, на обеих машинах и задать следующие адреса и маски: ws1 - 192.168.100.10, маска /16, ws2 - 172.24.116.8, маска /12.

 В отчёт помести скрины с содержанием изменённого файла etc/netplan/00-installer-config.yaml для каждой машины.


 Выполни команду netplan apply для перезапуска сервиса сети.

 В отчёт помести скрин с вызовом и выводом использованной команды.


### 2.1. Добавление статического маршрута вручную

 Добавь статический маршрут от одной машины до другой и обратно при помощи команды вида ip r add.

 Пропингуй соединение между машинами.

 В отчёт помести скрин с вызовом и выводом использованных команд.


### 2.2. Добавление статического маршрута с сохранением

 Перезапусти машины.

 Добавь статический маршрут от одной машины до другой с помощью файла etc/netplan/00-installer-config.yaml.

 В отчёт помести скрин с содержанием изменённого файла etc/netplan/00-installer-config.yaml.

 Пропингуй соединение между машинами.

 В отчёт помести скрин с вызовом и выводом использованной команды.

## Выполнение Part 2

### Сетевые интерфейсы (ip a) двух машин:

ws1:
![alt text](<pictures/Picture 10.jpg>)

ws2:
![alt text](<pictures/Picture 11.jpg>)

### Добавление нового адаптера в отделе "Сети"

Адаптер будет именно внутренней сети и под одним названием

ws1:
![alt text](<pictures/Picture 8.jpg>)

ws2:
![alt text](<pictures/Picture 9.jpg>)

### Задаем параметры нашего сетевого адаптера enp0s8

ws1:
![alt text](<pictures/Picture 12.jpg>)

ws2:
![alt text](<pictures/Picture 13.jpg>)

### Прописываем команду `sudo netplan apply` для обновления enp0s8 и `ip a`

ws1:
![alt text](<pictures/Picture 14.jpg>)

ws2:
![alt text](<pictures/Picture 15.jpg>)

### Добавление статического маршрута вручную

ws1:
![alt text](<pictures/Picture 16.jpg>)

ws2:
![alt text](<pictures/Picture 17.jpg>)

### Проверим ping между ними

ws1:
![alt text](<pictures/Picture 18.jpg>)

ws2:
![alt text](<pictures/Picture 19.jpg>)

Однако после `reboot` данный route не сохраняется, поэтому пропишем его в etc/netplan/00-installer-config.yaml

ws1:
![alt text](<pictures/Picture 20.jpg>)

ws2:
![alt text](<pictures/Picture 21.jpg>)

### Проверим ping между ними

ws1:
![alt text](<pictures/Picture 22.jpg>)

ws2:
![alt text](<pictures/Picture 23.jpg>)

## Part 3. Утилита iperf3

### 3.1. Скорость соединения

 Переведи и запиши в отчёт: 8 Mbps в MB/s, 100 MB/s в Kbps, 1 Gbps в Mbps.

### 3.2. Утилита iperf3

Измерь скорость соединения между ws1 и ws2.

В отчёт помести скрины с вызовом и выводом использованных команд.

## Выполнение Part 3

Утилита iperf - это генератор сетевого трафика, предназначенный для проверки скорости и пропускной способности сети.

Перевод 8 Mbps в MB/s, 100 MB/s в Kbps, 1 Gbps в Mbps:

8 Mbps = 1 MB/s
100 MB/s = 800000 Kbps
1 Gbps = 1000 Mbps

Проверка соединения, где ws1 - сервер, а ws2 - "клиент"

ws1:
![alt text](<pictures/Picture 24.jpg>)

ws2:
![alt text](<pictures/Picture 25.jpg>)

Проверка соединения, где ws2 - сервер, а ws1 - "клиент"

ws1:
![alt text](<pictures/Picture 26.jpg>)

ws2:
![alt text](<pictures/Picture 27.jpg>)

## Part 4. Сетевой экран

### 4.1. Утилита iptables

 - Создай файл /etc/firewall.sh, имитирующий фаерволл, на ws1 и ws2:


Нужно добавить в файл подряд следующие правила:

1) На ws1 примени стратегию, когда в начале пишется запрещающее правило, а в конце пишется разрешающее правило (это касается пунктов 4 и 5).

2) На ws2 примени стратегию, когда в начале пишется разрешающее правило, а в конце пишется запрещающее правило (это касается пунктов 4 и 5).

3) Открой на машинах доступ для порта 22 (ssh) и порта 80 (http).

4) Запрети echo reply (машина не должна «пинговаться», т.е. должна быть блокировка на OUTPUT).

5) Разреши echo reply (машина должна «пинговаться»).

Запусти файлы на обеих машинах командами chmod +x /etc/firewall.sh и /etc/firewall.sh.

В отчёт помести скрины с запуском обоих файлов;
В отчёте опиши разницу между стратегиями, применёнными в первом и втором файлах.

### 4.2. Утилита nmap

Командой ping найди машину, которая не «пингуется», после чего утилитой nmap покажи, что хост машины запущен.
Проверка: в выводе nmap должно быть сказано: Host is up.

В отчёт помести скрины с вызовом и выводом использованных команд ping и nmap.

## Выполнение Part 4

